<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/styles.css">
    <script type="text/javascript" src="js/require.js"></script>
    <script type="text/javascript">
        (function () {
            var config = {
                baseUrl: 'js'
            };

            var dependencies = [
                'customActivity'
            ];

            require(config, dependencies);
        })();

    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="/scripts/snippet-javascript-console.min.js?v=1"></script>
    <style>
body {font-family: Arial, Helvetica, sans-serif;}
* {box-sizing: border-box;}

input[type=text], select {
  width: 50%;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  margin-top: 6px;
  margin-bottom: 16px;
  resize: vertical;
}
.container {
  border-radius: 5px;
  background-color: #f2f2f2;
  padding: 20px;
}
    .bg-image {
  /* The image used */
  background-image: url("https://st2.depositphotos.com/1963585/7142/v/950/depositphotos_71422931-stock-illustration-seamless-background-with-arithmetic-symbols.jpg");
  
  /* Add the blur effect */
  filter: blur(8px);
  -webkit-filter: blur(8px);
  
  /* Full height */
  height: 100%; 
  
  /* Center and scale the image nicely */
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}

</style>
</head>

<body>
  <script>
    var dekey = getUrlVars()["selectNumber"];
    var dename = getUrlVars()["selectNumber1"];
    var uri_dec = decodeURIComponent((dename.replace(/\+/g, ' ')));
    function getUrlVars() {
    var vars = {};
    var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
    vars[key] = value;
    });
    return vars;
    }
      var payload = '';
      payload += '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">'
  payload += '<soapenv:Header>'
  payload += '<wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">'
  payload += '<wsse:UsernameToken wsu:Id="UsernameToken-24440876" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">'
  payload += '<wsse:Username>saybit1@deloitte.com</wsse:Username>'
  payload += '<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">avaya@4321</wsse:Password>'
  payload += '</wsse:UsernameToken>'
  payload += '</wsse:Security>'
  payload += '</soapenv:Header>'
  payload += '<soapenv:Body>'
  payload += '<RetrieveRequestMsg xmlns="http://exacttarget.com/wsdl/partnerAPI">'
  payload += '<RetrieveRequest>'
  payload += '<ObjectType>DataExtensionField</ObjectType>'
  payload += '<Properties>FieldType</Properties>'
  payload += '<Properties>Name</Properties>'
  payload += '<Filter xsi:type="SimpleFilterPart">'
  payload += '<Property>DataExtension.CustomerKey</Property>'
  payload += '<SimpleOperator>equals</SimpleOperator>'
  payload += '<Value>'+ dekey + '</Value>'
  payload += '</Filter>' 
  payload += '<QueryAllAccounts>true</QueryAllAccounts>'
  payload += '<Retrieves />'
  payload += '<Options>'
  payload += '<SaveOptions />'
  payload += '<IncludeObjects>true</IncludeObjects>'
  payload += '</Options>'
  payload += '</RetrieveRequest>'
  payload += '</RetrieveRequestMsg>'
  payload += '</soapenv:Body>'
  payload += '</soapenv:Envelope>'
      console.log(payload);
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open('POST', 'https://webservice.s7.exacttarget.com/Service.asmx', true);
    xmlhttp.setRequestHeader('Content-Type', 'text/xml');
      xmlhttp.setRequestHeader('SOAPAction', 'Retrieve');
      xmlhttp.send(payload);
  xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      myFunction(this);
    }
  };

function myFunction(xml) {
  var x, i, xmlDoc,z;
  xmlDoc = xml.responseXML;
  var select = document.getElementById("selectNumber");
  var select1 = document.getElementById("selectNumber1");
 x = xmlDoc.getElementsByTagName("Name");
 z = xmlDoc.getElementsByTagName("FieldType"); 
        var j=0;
  for (i = 0; i< x.length; i++) {
    var opt = x[i].childNodes[0].nodeValue;
    var opt1 = z[i].childNodes[0].nodeValue;
    if (opt1 == "Number" || opt1 == "Decimal") 
    {
    var y = document.createElement("INPUT");
    var str1 = "attr";
    y.setAttribute("type", "checkbox");
    y.setAttribute("name", "chck");  
   y.setAttribute("value", opt);
      j=j+1;
    y.setAttribute("id", (str1 + j));
      
  var label = document.createElement("label");
  label.textContent = opt;
  
    container.appendChild(y);
 container.appendChild(label);
    var br = document.createElement("br");
container.appendChild(br);
    }
}

}


  </script>
   <form id="container" name = "frmTest[]">
<label for="operator">Select the Arithmetic Operator:</label><br>
                <select id="operator">
                                <option value="plus">+</option>
                                <option value="minus">-</option>
                                <option value="multiply">*</option>
                                <option value="divide">/</option>
                            </select><br><br>
        <label for="operand">Select the Logical Operator:</label><br>
                            <select id="operand">
                                <option value="gt">&gt;</option>
                                <option value="lt">&lt;</option>
                                <option value="gte">&gt;=</option>
                                <option value="lte">&lt;=</option>
                                <option value="equals">=</option>
                            </select><br><br>
        <label for="fvalue">Provide the Final Value to compare:</label><br>
        <input type="text" placeholder="Final Value" id="fvalue"><br>  
   <p>Select the required attributes of :</p>
     <p id="demo1"></p>
  </form><br><br>
  <font size="2"><p> *Only fields having data type as "Number" and "Decimal" are displayed above; select not more than 3 checkboxes</p></font>
  <script>
document.getElementById("demo1").innerHTML = uri_dec;
</script>
</body>

</html>
